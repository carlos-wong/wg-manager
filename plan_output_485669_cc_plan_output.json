{
  "version": "1.1",
  "generated_at": "2026-01-18T10:30:00",
  "source": {
    "org_file": "wg-manager.org",
    "line_number": 19,
    "heading_title": "PLAN 制定一个开发计划。在添加节点之前，从服务器拉取配置再添加新节点，防止有两边同时添加多个节点到服务器上导致 IP 冲突的问题。"
  },
  "parent_context": {
    "parent": "PENDING 查看一下当前项目里面添加客户端节点的时候，有没有先跟服务器进行一次同步，还是只依赖本地的数据库？",
    "grandparent": "TODO wg-manager"
  },
  "decomposition_metadata": {
    "max_depth": 6,
    "total_tasks": 45,
    "leaf_tasks": 32,
    "mece_validated": true,
    "mece_source": "mece_module_decomposition",
    "estimated_total_minutes": 420
  },
  "sub_plans": [
    {
      "title": "创建同步模块 (wg_manager/sync.py)",
      "level": 4,
      "todo_state": "TODO",
      "properties": {
        "CREATED": "[2026-01-18 Sat 10:30]"
      },
      "description": "实现服务器配置同步和分布式锁机制的核心模块",
      "estimated_minutes": null,
      "is_leaf": false,
      "tags": ["sync", "core"],
      "children": [
        {
          "title": "实现配置拉取功能",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "从远程服务器原子性读取WireGuard配置",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "创建 sync.py 文件并添加模块导入",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "创建新文件，导入 SSHClient, typing, logging 等依赖",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "实现 pull_latest_config() 函数",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "通过SSH读取远程配置文件内容并返回字符串",
              "estimated_minutes": 15,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "实现 validate_config_format() 函数",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "验证配置格式是否完整，检查[Interface]和[Peer]结构",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        },
        {
          "title": "实现分布式锁机制",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "基于文件锁的并发控制机制",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "实现 acquire_lock() 函数",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "在服务器创建 .lock 文件，包含时间戳和超时检查",
              "estimated_minutes": 15,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "实现 release_lock() 函数",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "删除服务器上的 .lock 文件",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "实现 is_lock_stale() 函数",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "检查锁文件是否超时（默认30秒），超时则清理",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        },
        {
          "title": "实现验证功能",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "写入后验证节点是否成功添加",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "实现 validate_peer_in_config() 函数",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "解析配置确认指定公钥的节点存在",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "实现 compare_configs() 函数",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "比较两个配置快照，检测已使用IP的变化",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        }
      ]
    },
    {
      "title": "增强解析器模块 (wg_manager/parser.py)",
      "level": 4,
      "todo_state": "TODO",
      "properties": {
        "CREATED": "[2026-01-18 Sat 10:30]"
      },
      "description": "扩展解析器以支持IP冲突检测和配置验证",
      "estimated_minutes": null,
      "is_leaf": false,
      "tags": ["parser", "enhancement"],
      "children": [
        {
          "title": "添加IP提取和验证函数",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "增强IP地址处理能力",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "实现 extract_used_ips() 函数",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "从配置中提取所有已使用的IP地址列表",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "实现 is_ip_available() 函数",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "检查指定IP是否在当前配置中可用",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        },
        {
          "title": "添加公钥提取函数",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "支持节点验证的公钥处理",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "实现 extract_peer_pubkeys() 函数",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "从配置中提取所有节点的公钥列表",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        }
      ]
    },
    {
      "title": "增强SSH模块 (wg_manager/ssh.py)",
      "level": 4,
      "todo_state": "TODO",
      "properties": {
        "CREATED": "[2026-01-18 Sat 10:30]"
      },
      "description": "添加重试机制和原子操作支持",
      "estimated_minutes": null,
      "is_leaf": false,
      "tags": ["ssh", "reliability"],
      "children": [
        {
          "title": "实现重试机制",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "为关键操作添加指数退避重试",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "创建 retry_decorator 装饰器",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "实现通用重试装饰器，支持指数退避(1s→2s→4s)",
              "estimated_minutes": 15,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "为 read_remote_file() 添加重试逻辑",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "应用重试装饰器到远程文件读取函数",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "为 write_remote_file() 添加重试逻辑",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "应用重试装饰器到远程文件写入函数",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        },
        {
          "title": "实现原子写入",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "确保配置文件写入的原子性",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "实现 atomic_write_remote_file() 函数",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "先写入临时文件再mv，确保原子性",
              "estimated_minutes": 15,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        }
      ]
    },
    {
      "title": "修改节点添加流程 (wg_manager/add_peer.py)",
      "level": 4,
      "todo_state": "TODO",
      "properties": {
        "CREATED": "[2026-01-18 Sat 10:30]"
      },
      "description": "整合同步和锁机制到现有添加流程",
      "estimated_minutes": null,
      "is_leaf": false,
      "tags": ["add_peer", "integration"],
      "children": [
        {
          "title": "重构 add_peer() 函数结构",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "将添加流程分解为清晰的阶段",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "添加 sync 模块导入语句",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "在 add_peer.py 顶部导入新的 sync 模块",
              "estimated_minutes": 5,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "提取现有逻辑为 _prepare_peer() 辅助函数",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "将密钥生成和配置准备逻辑提取为独立函数",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "提取现有逻辑为 _write_peer() 辅助函数",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "将配置写入和热加载逻辑提取为独立函数",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        },
        {
          "title": "集成预添加同步",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "在分配IP之前同步最新配置",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "在 allocate_ip 前调用 pull_latest_config()",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "获取最新配置快照v1",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "添加锁获取逻辑 acquire_lock()",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "在IP分配前获取分布式锁",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "二次拉取配置并比对变化",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "获取v2快照，检测v1到v2的IP变化",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        },
        {
          "title": "集成后添加验证",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "写入后验证节点已成功添加",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "热加载后调用 pull_latest_config() 获取v3",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "读取写入后的最新配置",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "调用 validate_peer_in_config() 验证写入",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "确认新节点公钥存在于配置中",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "验证失败时抛出明确错误",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "添加 RuntimeError 处理验证失败情况",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        },
        {
          "title": "添加锁释放和异常处理",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "确保锁在任何情况下都能正确释放",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "使用 try/finally 包装主流程",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "确保 finally 中调用 release_lock()",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "添加锁获取失败的重试逻辑",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "如果锁被占用，等待并重试(最多3次)",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "添加操作超时处理",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "整体操作超过30秒时报错",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        }
      ]
    },
    {
      "title": "添加错误恢复机制",
      "level": 4,
      "todo_state": "TODO",
      "properties": {
        "CREATED": "[2026-01-18 Sat 10:30]"
      },
      "description": "实现回滚和错误恢复功能",
      "estimated_minutes": null,
      "is_leaf": false,
      "tags": ["recovery", "rollback"],
      "children": [
        {
          "title": "实现配置备份功能",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "修改前备份原始配置",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "在 sync.py 中添加 backup_config() 函数",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "写入前将配置复制到 .bak 文件",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "在 sync.py 中添加 restore_config() 函数",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "从 .bak 文件恢复原始配置",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        },
        {
          "title": "实现回滚逻辑",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "热加载失败时自动回滚",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "在 add_peer.py 中添加热加载失败回滚",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "wg syncconf 失败时调用 restore_config()",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "添加回滚操作日志记录",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "记录回滚时间戳和原因供排查",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        }
      ]
    },
    {
      "title": "添加日志和监控",
      "level": 4,
      "todo_state": "TODO",
      "properties": {
        "CREATED": "[2026-01-18 Sat 10:30]"
      },
      "description": "增强日志以支持问题排查",
      "estimated_minutes": null,
      "is_leaf": false,
      "tags": ["logging", "monitoring"],
      "children": [
        {
          "title": "添加同步操作日志",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "记录每次同步操作的详细信息",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "在 sync.py 中配置 logger",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "创建模块级 logger 实例",
              "estimated_minutes": 5,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "添加配置拉取日志",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "记录每次拉取的时间、大小、已用IP数",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "添加锁操作日志",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "记录锁获取、释放、超时事件",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        },
        {
          "title": "添加冲突检测日志",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "记录配置变化和潜在冲突",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "添加配置差异警告日志",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "v1与v2快照不同时记录warning",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "添加验证失败错误日志",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "写入验证失败时记录error并包含配置快照",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        }
      ]
    },
    {
      "title": "编写测试用例",
      "level": 4,
      "todo_state": "TODO",
      "properties": {
        "CREATED": "[2026-01-18 Sat 10:30]"
      },
      "description": "验证同步机制的正确性和边界情况",
      "estimated_minutes": null,
      "is_leaf": false,
      "tags": ["testing"],
      "children": [
        {
          "title": "编写 sync 模块单元测试",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "测试同步和锁机制的各函数",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "编写 pull_latest_config() 测试",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "测试正常拉取、空配置、网络错误场景",
              "estimated_minutes": 15,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "编写锁机制测试",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "测试获取、释放、超时、过期锁清理",
              "estimated_minutes": 15,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "编写配置验证测试",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "测试节点存在检测、格式验证",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        },
        {
          "title": "编写集成测试",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "测试完整的添加节点流程",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "编写单节点添加测试",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "验证基础添加流程仍正常工作",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "编写并发添加测试",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "使用threading模拟并发添加，验证无IP冲突",
              "estimated_minutes": 15,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "编写网络故障恢复测试",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "模拟SSH断开后的重试和恢复",
              "estimated_minutes": 15,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        }
      ]
    },
    {
      "title": "更新文档",
      "level": 4,
      "todo_state": "TODO",
      "properties": {
        "CREATED": "[2026-01-18 Sat 10:30]",
        "DEPENDS_ON": "创建同步模块, 修改节点添加流程"
      },
      "description": "更新README和代码注释以反映新机制",
      "estimated_minutes": null,
      "is_leaf": false,
      "tags": ["documentation"],
      "children": [
        {
          "title": "更新 README.md",
          "level": 5,
          "todo_state": "TODO",
          "properties": {
            "CREATED": "[2026-01-18 Sat 10:30]"
          },
          "description": "记录同步机制和并发安全特性",
          "estimated_minutes": null,
          "is_leaf": false,
          "tags": [],
          "children": [
            {
              "title": "添加并发安全说明章节",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "说明锁机制和IP冲突预防",
              "estimated_minutes": 12,
              "is_leaf": true,
              "tags": [],
              "children": []
            },
            {
              "title": "更新使用示例",
              "level": 6,
              "todo_state": "TODO",
              "properties": {
                "CREATED": "[2026-01-18 Sat 10:30]"
              },
              "description": "展示并发场景下的正确使用方式",
              "estimated_minutes": 10,
              "is_leaf": true,
              "tags": [],
              "children": []
            }
          ]
        }
      ]
    }
  ],
  "parallelization_info": {
    "parallel_tasks": [
      "创建同步模块 (wg_manager/sync.py)",
      "增强解析器模块 (wg_manager/parser.py)",
      "增强SSH模块 (wg_manager/ssh.py)"
    ],
    "dependent_tasks": [
      {
        "task": "修改节点添加流程 (wg_manager/add_peer.py)",
        "depends_on": ["创建同步模块 (wg_manager/sync.py)", "增强解析器模块 (wg_manager/parser.py)", "增强SSH模块 (wg_manager/ssh.py)"]
      },
      {
        "task": "添加错误恢复机制",
        "depends_on": ["创建同步模块 (wg_manager/sync.py)"]
      },
      {
        "task": "添加日志和监控",
        "depends_on": ["创建同步模块 (wg_manager/sync.py)"]
      },
      {
        "task": "编写测试用例",
        "depends_on": ["创建同步模块 (wg_manager/sync.py)", "修改节点添加流程 (wg_manager/add_peer.py)"]
      },
      {
        "task": "更新文档",
        "depends_on": ["创建同步模块 (wg_manager/sync.py)", "修改节点添加流程 (wg_manager/add_peer.py)"]
      }
    ]
  }
}
